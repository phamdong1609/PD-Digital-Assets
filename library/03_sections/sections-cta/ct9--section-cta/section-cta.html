<!-- 
  Section: QTDS CTA (Phiên bản 3.6 - Fix lỗi build triệt để)
  Description: 
  - Thêm script bảo vệ để khởi tạo `locals` và các biến mặc định.
  - Cách này đảm bảo linh kiện không bị lỗi ReferenceError khi build tĩnh (CT9).
  - Sử dụng `||` để cung cấp giá trị mặc định cho các biến đơn giản.
-->
<script>
  expressions.locals = Object.assign({
    tagline: null,
    title: null,
    description: null,
    features: null
  }, expressions.locals);
</script>
<section id="san-sang-chuyen-doi" class="qtds-section" style="background-color: white;">
    <div class="qtds-container">
        <!-- Section Header -->
        <div class="qtds-scroll-animate qtds-section-header">
            <span class="qtds-section-header__tagline">{{ tagline || 'HÀNH ĐỘNG NGAY' }}</span>
            <h2>{{ title || 'Sẵn Sàng Chuyển Đổi Số Cùng QTDS?' }}</h2>
        </div>

        <!-- CTA Card -->
        <div class="qtds-scroll-animate qtds-cta">
            <p class="qtds-cta__description">
                {{ description || 'Vượt qua thách thức cũ. QTDS đồng hành cùng QTDND hiện đại hóa và tăng cường quản trị hiệu quả.' }}
            </p>

            <!-- Features Grid -->
            <div class="qtds-cta__features">
                <!-- Logic MỚI: Nếu có mảng 'features' được truyền vào (từ JSON), thì lặp qua nó -->
                <if condition="features">
                    <each loop="feature in features">
                        <include src="library/02_molecules/molecule-feature-card/molecule-feature-card.html" locals='{{ feature }}'></include>
                    </each>
                </if>
                
                <!-- Logic CŨ: Nếu KHÔNG có mảng 'features', thì hiển thị nội dung tĩnh như cũ để CT9 không bị lỗi -->
                <if condition="!features">
                    <include src="library/02_molecules/molecule-feature-card/molecule-feature-card.html" locals='{
                        "color": "primary",
                        "icon": "fas fa-shield-alt",
                        "title": "Bảo Mật Dữ Liệu",
                        "text": "Ngăn chặn gian lận hiệu quả"
                    }'></include>
                    
                    <include src="library/02_molecules/molecule-feature-card/molecule-feature-card.html" locals='{
                        "color": "secondary",
                        "icon": "fas fa-rocket",
                        "title": "Tối Ưu Quy Trình",
                        "text": "Xử lý nhanh, giảm 70% thời gian"
                    }'></include>

                    <include src="library/02_molecules/molecule-feature-card/molecule-feature-card.html" locals='{
                        "color": "accent",
                        "icon": "fas fa-chart-line",
                        "title": "Nâng Cao Cạnh Tranh",
                        "text": "Hiện đại hóa, thu hút khách hàng"
                    }'></include>

                    <include src="library/02_molecules/molecule-feature-card/molecule-feature-card.html" locals='{
                        "color": "purple",
                        "icon": "fas fa-check-circle",
                        "title": "Tuân Thủ NHNN",
                        "text": "100% đáp ứng quy định"
                    }'></include>
                </if>
            </div>

            <!-- Action Buttons - Phần này tĩnh, không cần thay đổi -->
            <div class="qtds-cta__actions">
                <a href="https://giaiphap.qtds.vn" class="qtds-btn qtds-btn--primary qtds-cta__btn--primary" target="_blank" rel="noopener noreferrer">
                    <i class="fas fa-rocket"></i>
                    Dùng Thử Miễn Phí
                </a>
                <a href="https://zalo.me/g/flgzlp294" class="qtds-btn qtds-btn--secondary" target="_blank" rel="noopener noreferrer" style="transition: none !important;" onmouseover="this.style.transform='scale(1)'" onmouseout="this.style.transform='scale(1)'">
                    <i class="fas fa-users"></i>
                    Tham Gia Cộng Đồng
                </a>
            </div>
        </div>
    </div>
</section>

